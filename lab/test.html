<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Document</title>
    <style>
        .progress{position:fixed;z-index:99;left:0;width:0;height:2px;border-radius:0 1px 1px 0;-webkit-transition:all 1000ms;transition:all 1000ms;}
        .progress-top{top:0;background:#fff;box-shadow:0 0 10px #fff; background: gold}
        .progress-top.done{opacity:0}
        .progress-bottom{top:50px;background:#4b9cdb;box-shadow:0 0 10px #4b9cdb}
    </style>
</head>
<body>
    <div id="loadProgress" class="progress progress-top"></div>
    <div id="scrollProgress" class="progress progress-bottom"></div>
    <div>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Voluptate quo corrupti distinctio deleniti ad quos ratione quod, fuga nam molestiae laudantium, voluptatum maxime hic culpa sunt debitis consectetur quibusdam, est.</div>
</body>
<script>
window.onload=function(){window.loaded=!0}

!function(){
    console.log("$1")
    var t = document.querySelector("#loadProgress"),
        o = 1,
        e = function(t,o) {
            return Math.floor(Math.random()*(o-t+1)+t)
        },
        n=function() {
            var i = e(10,100);
            setTimeout(function() {
                console.log("$2")
                if(window.loaded) {
                    console.log("$2.1")
                    t.style.width="100%"
                setTimeout(function() {
                    console.log("$2.2")
                    t.classList.add("done")},500)
                } else { 
                    console.log("$3")
                    o += e(1,500);
                    o>98&&(o=98);
                    t.style.width=o+"%";
                    n()
            }},i)
        }
n()}()
</script>
</html>